<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<BorderPane fx:id="root" prefHeight="500.0" prefWidth="900.0" styleClass="root-container" stylesheets="@../css/listaCliente.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.robin.pos.controller.ListaClienteController">

   <top>
      <!-- Cabecera principal con gradiente -->
      <VBox spacing="15" styleClass="header-container">
         <padding>
            <Insets bottom="20" left="25" right="25" top="20" />
         </padding>

         <!-- Título y subtítulo -->
         <VBox spacing="5">
            <Label fx:id="lblListaCliente" styleClass="header-title" text="Lista de Clientes" />
            <Label styleClass="header-subtitle" text="Administra y consulta la información de tus clientes" />
         </VBox>

         <!-- Barra de herramientas -->
         <HBox fx:id="hbxCabecera" alignment="CENTER_LEFT" prefHeight="46.0" prefWidth="850.0" spacing="15" styleClass="toolbar-container">
            <padding>
               <Insets bottom="10" left="15" right="15" top="10" />
            </padding>

            <!-- Campo de búsqueda con icono -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="search-container">
               <padding>
                  <Insets bottom="8" left="15" right="15" top="8" />
               </padding>

               <!-- Icono de búsqueda SVG -->
               <SVGPath content="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" scaleX="0.9" scaleY="0.9" styleClass="search-icon" />

               <TextField fx:id="txtBuscarCliente" onKeyPressed="#buscarCliente" prefWidth="280" promptText="Buscar por nombre, código o documento..." styleClass="search-field" />
            </HBox>

            <!-- Espaciador flexible -->
            <Region HBox.hgrow="ALWAYS" />

            <!-- Contador de registros -->
            <HBox alignment="CENTER" spacing="8" styleClass="counter-container">
               <padding>
                  <Insets bottom="8" left="15" right="15" top="8" />
               </padding>
               <SVGPath content="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" scaleX="0.85" scaleY="0.85" styleClass="counter-icon" />
               <Label fx:id="lblContador" styleClass="counter-label" text="0 clientes" />
            </HBox>

            <!-- Botones de acción -->
            <HBox alignment="CENTER_RIGHT" spacing="10">
               <!-- Botón Editar -->
               <Button fx:id="btnEditarCliente" onAction="#editarClienteAction" styleClass="action-button edit-button">
                  <tooltip>
                     <Tooltip text="Editar cliente seleccionado (F2)" />
                  </tooltip>
                  <graphic>
                     <HBox alignment="CENTER" spacing="8">
                        <SVGPath content="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" scaleX="0.75" scaleY="0.75" styleClass="button-icon" />
                        <Label styleClass="button-label" text="Editar" />
                     </HBox>
                  </graphic>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </Button>

               <!-- Botón Nuevo -->
               <Button fx:id="btnNuevoCliente" onAction="#crearCliente" styleClass="action-button new-button">
                  <tooltip>
                     <Tooltip text="Crear nuevo cliente (F3)" />
                  </tooltip>
                  <graphic>
                     <HBox alignment="CENTER" spacing="8">
                        <SVGPath content="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" scaleX="0.85" scaleY="0.85" styleClass="button-icon-new" />
                        <Label styleClass="button-label-new" text="Nuevo" />
                     </HBox>
                  </graphic>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </Button>

               <!-- Botón Refrescar -->
               <Button fx:id="btnRefrescar" onAction="#refrescarLista" styleClass="action-button refresh-button">
                  <tooltip>
                     <Tooltip text="Actualizar lista (F5)" />
                  </tooltip>
                  <graphic>
                     <SVGPath content="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" scaleX="0.75" scaleY="0.75" styleClass="button-icon" />
                  </graphic>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </Button>
            </HBox>
         </HBox>
      </VBox>
   </top>

   <center>
      <!-- Contenedor principal de la tabla -->
      <VBox fx:id="vbxPrincipal" styleClass="table-wrapper" BorderPane.alignment="CENTER">
         <padding>
            <Insets bottom="25" left="25" right="25" top="0" />
         </padding>

         <StackPane fx:id="tableContainer" styleClass="table-container" VBox.vgrow="ALWAYS">
            <!-- Efecto de sombra para la tabla -->
            <effect>
               <DropShadow blurType="GAUSSIAN" color="#00000020" offsetY="4" radius="15" />
            </effect>

            <TableView fx:id="tListaCliente" styleClass="modern-table" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="colCodigo" minWidth="80" prefWidth="100" styleClass="column-code" text="Código" />

                  <TableColumn fx:id="colNombre" minWidth="200" prefWidth="380" styleClass="column-name" text="Nombre / Razón Social" />

                  <TableColumn fx:id="colDocumento" minWidth="100" prefWidth="120" styleClass="column-doc" text="Documento" />

                  <TableColumn fx:id="colTipCliente" minWidth="80" prefWidth="100" styleClass="column-type" text="Tipo Cliente" />

                  <TableColumn fx:id="colTipPersona" minWidth="80" prefWidth="100" styleClass="column-type" text="Tipo Persona" />

                  <TableColumn fx:id="colEstado" minWidth="70" prefWidth="90" styleClass="column-status" text="Estado" />
               </columns>

               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
         </StackPane>
      </VBox>
   </center>

   <bottom>
      <!-- Barra de estado inferior -->
      <HBox alignment="CENTER_LEFT" spacing="20" styleClass="status-bar">
         <padding>
            <Insets bottom="10" left="25" right="25" top="10" />
         </padding>

         <Label fx:id="lblEstado" styleClass="status-text" text="Listo" />

         <Region HBox.hgrow="ALWAYS" />

         <HBox alignment="CENTER_RIGHT" spacing="15">
            <Label styleClass="shortcut-hint" text="F2: Editar" />
            <Label styleClass="shortcut-hint" text="F3: Nuevo" />
            <Label styleClass="shortcut-hint" text="F5: Refrescar" />
            <Label styleClass="shortcut-hint" text="ESC: Cerrar" />
         </HBox>
      </HBox>
   </bottom>
</BorderPane>
