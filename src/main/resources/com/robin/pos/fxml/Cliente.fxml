<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>

<?import javafx.scene.control.TextField?>

<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>

<?import javafx.scene.layout.Region?>

<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox fx:id="vbxPrincipal"
      styleClass="root-container"
      stylesheets="@../css/Cliente.css"
      xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.robin.pos.controller.ClienteController"
      VBox.vgrow="ALWAYS"
      HBox.hgrow="ALWAYS">

    <!-- ==================== CABECERA (FIJA) ==================== -->
    <HBox styleClass="header-container" alignment="CENTER_LEFT" spacing="15" minHeight="80" maxHeight="80">
        <padding>
            <Insets top="15" right="20" bottom="15" left="20"/>
        </padding>

        <!-- Icono de usuario -->
        <StackPane styleClass="header-icon-container" minWidth="45" minHeight="45" maxWidth="45" maxHeight="45">
            <SVGPath content="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                     styleClass="header-icon"
                     scaleX="1.2" scaleY="1.2"/>
        </StackPane>

        <VBox spacing="2" alignment="CENTER_LEFT">
            <Label fx:id="lblTitulo" text="Registro de Cliente" styleClass="header-title"/>
            <Label fx:id="lblSubtitulo" text="Complete los datos del cliente" styleClass="header-subtitle"/>
        </VBox>
    </HBox>

    <!-- ==================== CONTENIDO CON SCROLL ==================== -->
    <ScrollPane fitToWidth="true"
                styleClass="content-scroll"
                VBox.vgrow="ALWAYS"
                hbarPolicy="NEVER"
                vbarPolicy="AS_NEEDED">

        <VBox fx:id="vbxCuerpo" styleClass="form-container" spacing="12">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>

            <!-- ===== SECCIÓN: DOCUMENTO ===== -->
            <VBox styleClass="section-container" spacing="12">
                <Label text="Información del Documento" styleClass="section-title"/>

                <GridPane fx:id="gpDocumento" hgap="15" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="35"/>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="65"/>
                    </columnConstraints>

                    <!-- Tipo Documento -->
                    <VBox spacing="5">
                        <Label text="Tipo Documento" styleClass="field-label"/>
                        <ComboBox fx:id="cbxTipDoc" maxWidth="Infinity" styleClass="modern-combo">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </ComboBox>
                    </VBox>

                    <!-- Número Documento -->
                    <VBox spacing="5" GridPane.columnIndex="1">
                        <Label fx:id="lblTipNum" text="Número de Documento" styleClass="field-label"/>
                        <TextField fx:id="txtNumDoc" promptText="Ingrese el número" styleClass="modern-field"/>
                    </VBox>
                </GridPane>
            </VBox>

            <!-- ===== SECCIÓN: TIPO PERSONA Y NACIONALIDAD ===== -->
            <GridPane fx:id="gpDos" hgap="15" vgap="8">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                    <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                </columnConstraints>

                <!-- Tipo Persona -->
                <VBox spacing="6">
                    <Label fx:id="lblTipPersona" text="Tipo de Persona" styleClass="field-label"/>
                    <HBox styleClass="radio-group" spacing="15" alignment="CENTER_LEFT">
                        <padding>
                            <Insets top="8" right="12" bottom="8" left="12"/>
                        </padding>
                        <RadioButton fx:id="rbnJuridico" text="Jurídico" styleClass="modern-radio">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </RadioButton>
                        <RadioButton fx:id="rbnNatural" text="Natural" styleClass="modern-radio">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </RadioButton>
                    </HBox>
                </VBox>

                <!-- Nacionalidad -->
                <VBox spacing="6" GridPane.columnIndex="1">
                    <Label fx:id="lblNacionalidad" text="Nacionalidad" styleClass="field-label"/>
                    <HBox styleClass="radio-group" spacing="15" alignment="CENTER_LEFT">
                        <padding>
                            <Insets top="8" right="12" bottom="8" left="12"/>
                        </padding>
                        <RadioButton fx:id="rbnNacional" text="Nacional" styleClass="modern-radio">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </RadioButton>
                        <RadioButton fx:id="rbnExtranjero" text="Extranjero" styleClass="modern-radio">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </RadioButton>
                    </HBox>
                </VBox>
            </GridPane>

            <!-- ===== SECCIÓN: DATOS PERSONA NATURAL (DNI/CE) ===== -->
            <VBox fx:id="gpTres" styleClass="section-container" spacing="12">
                <Label text="Datos Personales" styleClass="section-title"/>

                <!-- Apellidos -->
                <GridPane hgap="15" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                    </columnConstraints>

                    <VBox spacing="5">
                        <Label text="Apellido Paterno *" styleClass="field-label"/>
                        <TextField fx:id="txtApePat" promptText="Ingrese apellido paterno" styleClass="modern-field"/>
                    </VBox>

                    <VBox spacing="5" GridPane.columnIndex="1">
                        <Label text="Apellido Materno *" styleClass="field-label"/>
                        <TextField fx:id="txtApeMat" promptText="Ingrese apellido materno" styleClass="modern-field"/>
                    </VBox>
                </GridPane>

                <!-- Nombres -->
                <GridPane hgap="15" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="50"/>
                    </columnConstraints>

                    <VBox spacing="5">
                        <Label text="Primer Nombre *" styleClass="field-label"/>
                        <TextField fx:id="txtPriNom" promptText="Ingrese primer nombre" styleClass="modern-field"/>
                    </VBox>

                    <VBox spacing="5" GridPane.columnIndex="1">
                        <Label text="Segundo Nombre" styleClass="field-label"/>
                        <TextField fx:id="txtSegNom" promptText="Ingrese segundo nombre" styleClass="modern-field"/>
                    </VBox>
                </GridPane>
            </VBox>

            <!-- ===== SECCIÓN: RAZÓN SOCIAL (RUC) ===== -->
            <VBox fx:id="gpCuatro" styleClass="section-container" spacing="10">
                <Label text="Datos de la Empresa" styleClass="section-title"/>

                <VBox spacing="5">
                    <Label text="Razón Social *" styleClass="field-label"/>
                    <TextField fx:id="txtRazSocial" promptText="Ingrese la razón social" styleClass="modern-field"/>
                </VBox>
            </VBox>

            <!-- ===== SECCIÓN: DIRECCIÓN ===== -->
            <VBox fx:id="gpCinco" styleClass="section-container" spacing="10">
                <Label text="Dirección" styleClass="section-title"/>

                <VBox spacing="5">
                    <Label text="Dirección Completa *" styleClass="field-label"/>
                    <TextField fx:id="txtDirec" promptText="Ingrese la dirección completa" styleClass="modern-field"/>
                </VBox>
            </VBox>

            <!-- ===== SECCIÓN: UBIGEO ===== -->
            <VBox fx:id="gpSeis" styleClass="section-container" spacing="10">
                <Label text="Ubicación Geográfica" styleClass="section-title"/>

                <GridPane hgap="12" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="33"/>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="34"/>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="33"/>
                    </columnConstraints>

                    <!-- Departamento -->
                    <VBox spacing="5">
                        <Label text="Departamento *" styleClass="field-label"/>
                        <ComboBox fx:id="cbxDepartamento" maxWidth="Infinity" onAction="#buscarProvincias" styleClass="modern-combo">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </ComboBox>
                    </VBox>

                    <!-- Provincia -->
                    <VBox spacing="5" GridPane.columnIndex="1">
                        <Label text="Provincia *" styleClass="field-label"/>
                        <ComboBox fx:id="cbxProvincia" maxWidth="Infinity" onAction="#buscarDistrito" styleClass="modern-combo">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </ComboBox>
                    </VBox>

                    <!-- Distrito -->
                    <VBox spacing="5" GridPane.columnIndex="2">
                        <Label text="Distrito *" styleClass="field-label"/>
                        <ComboBox fx:id="cbxDistrito" maxWidth="Infinity" styleClass="modern-combo">
                            <cursor><Cursor fx:constant="HAND"/></cursor>
                        </ComboBox>
                    </VBox>
                </GridPane>
            </VBox>
        </VBox>
    </ScrollPane>

    <!-- ==================== PIE / BOTONES (FIJO) ==================== -->
    <HBox fx:id="hbxPie" styleClass="footer-container" alignment="CENTER_RIGHT" spacing="12"
          minHeight="60" maxHeight="60">
        <padding>
            <Insets top="12" right="20" bottom="12" left="20"/>
        </padding>

        <!-- Indicador de campos requeridos -->
        <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="*" styleClass="required-indicator"/>
            <Label text="Campos obligatorios" styleClass="required-text"/>
        </HBox>

        <Region HBox.hgrow="ALWAYS"/>

        <!-- Botón Cancelar -->
        <Button fx:id="btnSalir" text="Cancelar" onAction="#cerrarModal"
                styleClass="btn-secondary" prefWidth="110" prefHeight="36">
            <cursor><Cursor fx:constant="HAND"/></cursor>
            <graphic>
                <SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                         styleClass="btn-icon-secondary" scaleX="0.65" scaleY="0.65"/>
            </graphic>
        </Button>

        <!-- Botón Registrar -->
        <Button fx:id="btnRegistrar" text="Registrar" onAction="#guardarCliente"
                styleClass="btn-primary" prefWidth="120" prefHeight="36">
            <cursor><Cursor fx:constant="HAND"/></cursor>
            <graphic>
                <SVGPath content="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                         styleClass="btn-icon-primary" scaleX="0.7" scaleY="0.7"/>
            </graphic>
        </Button>
    </HBox>
</VBox>